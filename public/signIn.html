<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로그인</title>
    <link rel="stylesheet" href="./source/main/upload.css">
    <link rel="stylesheet" href="./source/reset.css">
    <link rel="stylesheet" href="./source/SignIn/signIn.css">
    <link rel="stylesheet" href="./headerAndFooter/header.css">
    <link rel="stylesheet" href="./headerAndFooter/footer.css">
</head>
<body>  

    <header><!--include-html="./hf/header.html" -->
        <h1 class="logo">
            <a href="main.html">
                <img src="./source/image/logo.svg" alt="Logo">
            </a>
        </h1>
        <nav id="nav">
            <ul class="nav_left">
                <li><a href="#">찜 목록</a></li>
                <li><a href="#">내 리뷰</a></li>
                <li><a href="upload.html">맛집 추가</a></li>
            </ul>
            <ul class="nav_right">
                <li id="li_left"><a href="signIn.html">로그인</a></li>
                <li style="font-size: 3rem;">|</li>
                <li id="li_right"><a href="SignUp.html">회원가입</a></li>
            </ul>
        </nav>
        
    </header>

    <section>
        <h1 class="signInTitle">로그인</h1>
    </section>
    
    <br><br><br><br><hr style="height: 1rem; width: 100rem; margin: 0 auto; background-color: #FFA629; border: 0; border-radius: 1rem; margin-bottom: 4rem;">
    
    <section>
        <div class="container SignUpCon">
            <span class="mb-3">이메일</span>
            <div >
                <input type="email" class="form-control" placeholder="email" id="email">
            </div>
            <span class="mb-3">패스워드</span>
            <div>
               <input type="password" class="form-control" placeholder="pw" id="pw">
            </div>
            <button type="submit" class="btn btn-primary" id="signInBtn">로그인</button>
            
        </div>
    </section>
                
    <footer>
        footer
        <span>contact : yjj052800@gmail.com</span>
    </footer>
    <script src="./source/main/banner/banner.js"></script>

    <!-- firebase -->
     <!-- update the version number as needed -->
     <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
     <!-- include only the Firebase features as you need -->
     <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
     <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
     <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-storage.js"></script>

     <script>


        const firebaseConfig = {
             apiKey: "AIzaSyAdjgE4UD7KMZms6-1vxEenRf-kvv6PQRs",
             authDomain: "junchelin-2029b.firebaseapp.com",
             projectId: "junchelin-2029b",
             storageBucket: "junchelin-2029b.appspot.com",
             messagingSenderId: "687790285758",
             appId: "1:687790285758:web:982f1ee156909249de4fef",
             measurementId: "G-7YXNC9Q0SZ"
         };

         // Initialize Firebase
         firebase.initializeApp(firebaseConfig);
     </script>

     <script>
        //firebase db, storage 호출해서 변수에 저장
        const db = firebase.firestore();
        const storage = firebase.storage();

        

        const signInBtn = document.getElementById('signInBtn');
        const logoutBtn = document.getElementById('logoutBtn');

        signInBtn.addEventListener("click", addMember);


        function addMember(){
            const email = document.getElementById('email').value;
            const password = document.getElementById('pw').value;
            //로그인 기능에 접근
            firebase.auth().signInWithEmailAndPassword(email, password).then((result)=>{
                //로그인 성공
                console.log(result);
                console.log(result.user);
                //로그인 정보 localstorage 에 저장
                firebase.auth().onAuthStateChanged((user)=>{
                if (user) {
                    console.log(user.uid);
                    console.log(user.displayName);
                    localStorage.setItem('user', JSON.stringify(user));
                }
            });
                window.location.href="/main.html";
            }).catch(()=>{
                //로그인 실패
                console.log(`고양이실패단이다~!`);
            })
                
            

                
            }


     </script>
    <script src="./headerAndFooter/header.js"></script>
</body>
</html>
